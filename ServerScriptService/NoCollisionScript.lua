local PhysicsService = game:GetService("PhysicsService")
local Players = game:GetService("Players")

-- ?????????????
local groupName = "PlayersGroup"

-- ?????????????? (???????????)
local success, err = pcall(function()
	PhysicsService:RegisterCollisionGroup(groupName)
end)

-- ??????????????? "???????????" (False = ?????)
PhysicsService:CollisionGroupSetCollidable(groupName, groupName, false)

-- ?????????????????????
local function setCollisionGroup(character)
	for _, part in pairs(character:GetDescendants()) do
		if part:IsA("BasePart") then
			part.CollisionGroup = groupName
		end
	end
end

-- ???????????????????
Players.PlayerAdded:Connect(function(player)
	player.CharacterAdded:Connect(function(character)
		-- ???????????????????????
		character:WaitForChild("HumanoidRootPart")
		character:WaitForChild("Head")
		character:WaitForChild("Humanoid")

		setCollisionGroup(character)

		-- ?????????????????? (???? ???????) ?????????????????
		character.DescendantAdded:Connect(function(descendant)
			if descendant:IsA("BasePart") then
				descendant.CollisionGroup = groupName
			end
		end)
	end)
end)